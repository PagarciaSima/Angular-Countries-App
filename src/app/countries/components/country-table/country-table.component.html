<div *ngIf="countries.length === 0; else table" class="alert alert-warning text-center">
  <i class="fa-solid fa-triangle-exclamation me-2"></i>No hay paises que mostrar
</div>

<ng-template #table>
  <table class="table table-hover table-striped">
    <thead class="table-primary">
      <tr>
        <th>#</th>
        <th>Icon</th>
        <th>Nombre</th>
        <th>Capital</th>
        <th>Población</th>
        <th>Detalle</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let country of paginatedCountries; let i = index">
        <td>{{ (currentPage - 1) * countriesPerPage + (i + 1) }}</td>
        <td>
          <img [src]="country.flags.svg" [alt]="country.name.common" />
        </td>
        <td> {{ country.name.common }}</td>
        <td> {{ country.capital }}</td>
        <td> {{ country.population | number }}</td>
        <td>
          <a [routerLink]="['/countries/by', country.cca3]">
            <i class="fa-solid fa-circle-info me-2"></i><span>Info</span>
          </a>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Controles de paginación -->
  <nav aria-label="Page navigation" *ngIf="totalPages > 1">
    <ul class="pagination justify-content-center">
       <!-- Botón Primero -->
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(1)" aria-label="Primero">
          <span aria-hidden="true">Primero</span>
        </a>
      </li>

      <!-- Botón Anterior -->
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="changePage(currentPage - 1)" aria-label="Anterior">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>

      <!-- Botones de las páginas -->
      <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index"
          [class.active]="currentPage === i + 1">
        <a class="page-link" (click)="changePage(i + 1)">{{ i + 1 }}</a>
      </li>

      <!-- Botón Siguiente -->
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="changePage(currentPage + 1)" aria-label="Siguiente">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>

      <!-- Botón Último -->
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="changePage(totalPages)" aria-label="Último">
          <span aria-hidden="true">Último</span>
        </a>
      </li>
    </ul>
  </nav>
</ng-template>
